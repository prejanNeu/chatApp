      <div class="sidebar">
        <div class="sidebar-header">
          <span>Chats</span>
        </div>
        <ul class="room-list">
          {% for entry in rooms %}
            <li class="room-item {% if entry.room.name == room_name %}active{% endif %}" data-url="{% url 'chat:room' entry.room.name %}" data-room="{{ entry.room.room_id }}" data-user-id="{{ entry.other_user_id }}">
              {% if entry.avatar_url %}
                <img src="{{ entry.avatar_url }}" alt="Avatar" class="user-avatar-small">
              {% else %}
                <div class="user-avatar-placeholder-small">{{ entry.display_name|slice:":1"|upper }}</div>
              {% endif %}
              <div class="room-info">
                <span class="room-name">
                    {{ entry.display_name }}
                    <span class="online-dot {% if entry.is_online %}online{% else %}offline{% endif %}" id="status-dot-{{ entry.other_user_id }}" title="Online"></span>
                </span>
                <span class="last-message" id="last-message-{{ entry.room.room_id }}">
                    {% if entry.last_message %}
                        {% if entry.last_message.user == request.user %}You: {% endif %}{{ entry.last_message.content|truncatechars:30 }}
                    {% else %}
                        No messages yet
                    {% endif %}
                </span>
              </div>
              {% if entry.unread_count > 0 %}
                <span class="unread-badge" id="unread-badge-{{ entry.room.room_id }}">{{ entry.unread_count }}</span>
              {% else %}
                <span class="unread-badge" id="unread-badge-{{ entry.room.room_id }}" style="display: none;">0</span>
              {% endif %}
            </li>
          {% endfor %}
        </ul>
      </div>
