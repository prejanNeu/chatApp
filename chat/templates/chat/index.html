{% load static %}
<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Chat Rooms</title>
  </head>
  <body>
    <h2>Your Chats</h2>
    <ul>
      {% for entry in rooms %}
      <li data-room="{{ entry.room.room_id }}">
        <a href="{% url 'chat:room' entry.room.name %}">
          {{ entry.room.display_name }}
        </a>

        {% if entry.last_message %}
        <span class="last-message"
          >- {{ entry.last_message.content|truncatechars:30 }}</span
        >
        {% endif %}

        <span
          class="unread-badge"
          style="
          background: red;
          color: white;
          border-radius: 50%;
          padding: 2px 8px;
          "
          >
          {{ entry.unread_count }}
        </span>
      </li>
          {% empty %}
          <li>No active chats.</li>
          {% endfor %}
    </ul>

    <script src="{% static 'chat/index.js' %}"></script>
  </body>
</html>
